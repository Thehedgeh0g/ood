# **Лабораторная работа №9. Паттерн «MVC/MVP/MVVM»**

- [**Лабораторная работа №9. Паттерн «MVC/MVP/MVVM»**](#лабораторная-работа-9-паттерн-mvcmvpmvvm)
  - [Критерии оценивания лабораторной работы](#критерии-оценивания-лабораторной-работы)
  - [Задание 1](#задание-1)
    - [Вариант 1 Визуализация графика гармонических функций – 100 баллов](#вариант-1-визуализация-графика-гармонических-функций--100-баллов)
      - [Бонус в 30 баллов за покрытие модели юнит-тестами](#бонус-в-30-баллов-за-покрытие-модели-юнит-тестами)
      - [Бонус в 50 баллов за возможность переключения между представлениями](#бонус-в-50-баллов-за-возможность-переключения-между-представлениями)
    - [Вариант 2 – 200 баллов](#вариант-2--200-баллов)
      - [Бонус за возможность отмены и повтора операций – 80 баллов](#бонус-за-возможность-отмены-и-повтора-операций--80-баллов)
      - [Бонус за возможность сохранения и загрузки документа в файл – 40 баллов](#бонус-за-возможность-сохранения-и-загрузки-документа-в-файл--40-баллов)
      - [Бонус за покрытие кода тестами – до 50 баллов](#бонус-за-покрытие-кода-тестами--до-50-баллов)
      - [Бонус за возможность вставки растровых изображений – до 200 баллов](#бонус-за-возможность-вставки-растровых-изображений--до-200-баллов)

## Критерии оценивания лабораторной работы

При сдаче лабораторной работы студент должен уметь ответить на вопросы преподавателя насчёт используемых паттернов проектирования, уметь изобразить схему паттерна на диаграмме классов, а также продемонстрировать диаграмму классов своего приложения.

- На оценку «удовлетворительно» необходимо набрать 80 баллов.
- На оценку «хорошо» необходимо набрать 160 баллов.
- На оценку «отлично» необходимо набрать 320 баллов.

**Дополнительные задания принимаются только после выполнения обязательных заданий.**

## Задание 1

Выполните один из предложенных вариантов заданий

### Вариант 1 Визуализация графика гармонических функций – 100 баллов

Разработайте с использованием паттерна MVC, MVP либо MVVM приложение с графическим интерфейсом пользователя, визуализирующим график суммы гармонических колебаний определенных частот, фаз и амплитуд. Пользователь может добавлять и удалять гармонические функции, а также редактировать значения их частоты, фазы, амплитуды, а также осуществлять выбор гармонической функции (синус либо косинус).

![I1](Images/Aspose.Words.60f228ea-87f6-4812-b47e-4b4d01d41758.001.png)

При изменении параметров гармоники, удалении или добавлении график должен автоматически обновляться.

Можно использовать произвольный UI-фреймворк.

#### Бонус в 30 баллов за покрытие модели юнит-тестами

Бонус начисляется за разработку классов модели с использованием TDD-подхода.

#### Бонус в 50 баллов за возможность переключения между представлениями

Бонус начисляется за возможность переключения между представлениями (при помощи вкладок, либо при помощи радиокнопок) значений функции в виде графика и в виде таблицы:

![I2](Images/Aspose.Words.60f228ea-87f6-4812-b47e-4b4d01d41758.002.png)

### Вариант 2 – 200 баллов

Разработайте приложение с использованием паттерна MVC, MVP или MVVM приложение, позволяющее создавать композицию из геометрических фигур: прямоугольники, треугольники, эллипсы.

![I3](Images/Aspose.Words.60f228ea-87f6-4812-b47e-4b4d01d41758.003.png)

При помощи кнопок панели инструментов или меню пользователь может добавлять на холст соответствующие фигуры. Добавляемая фигура с некоторыми изначальными размерами вставляется в позицию по-умолчанию (например, в центр).

![I4](Images/Aspose.Words.60f228ea-87f6-4812-b47e-4b4d01d41758.004.png)

При помощи мыши пользователь может выделить фигуру, нажав внутрь ее области. Выделенная фигура имеет прямоугольную рамку выделения с маркерами изменения размеров. Нажатие на зону холста, свободную от фигур снимает выделение с текущей фигуры.

Пользователь может перемещать фигуры по холсту, таская их за внутреннюю область фигуры, а также изменять размеры, таская маркеры изменения размеров рамки выделения. Переместить объект за пределы холста должно быть невозможно.

Выделенную фигуру можно удалить с холста, нажав клавишу Delete на клавиатуре либо соответствующую кнопку на панели инструментов (выбрав пункт меню).

При рисовании фигур или изменении размеров окна не должно происходить мерцания изображения (используйте двойную буферизацию).

#### Бонус за возможность отмены и повтора операций – 80 баллов

Бонус начисляется за поддержку операций Undo и Redo для операций, изменяющий состояние документа. При отмене операции удаления документа фигура должна восстанавливаться на том же слое с сохранением своих размеров и положения.

#### Бонус за возможность сохранения и загрузки документа в файл – 40 баллов

Бонус начисляется за возможность сохранения и загрузки документа в файле формата json, xml или в ином человекочитаемом формате. Должны быть реализованы операции Open, Save и Save As, ведущие себя привычным образом.

#### Бонус за покрытие кода тестами – до 50 баллов

Бонус начисляется за покрытие тестами основных классов программы, не связанных непосредственно с визуализацией.

#### Бонус за возможность вставки растровых изображений – до 200 баллов

Бонус начисляется за возможность вставки в документ растровых изображений (хотя бы в одном графическом формате). Пользователь может управлять растровыми изображениями наравне с другими объектами холста – перемещать, ресайзить, удалять. После вставки изображения в документ оригинальный файл изображения использоваться программой не должен: пользователь может его удалить, переименовать или изменить. Это должно быть справедливо и при отмене/повторе операций вставки. **40% от максимума за базовую часть**

Если изображения нет на холсте (например, при отмене его вставки или удалении с холста), изображение должно удаляться из оперативной памяти. При появлении изображения на холсте (например, при повторе операции вставки или отмене операции удаления с холста), изображение должно загружаться из временного хранилища, куда оно должно помещаться в момент первоначальной вставки в документ. При удалении изображения с холста и из истории команд оно должно удаляться и из хранилища. **40% от максимума при наличии Undo/Redo**

При сохранении документа файлы находящихся в нём изображений должны сохраняться рядом с ним (возможно, в подкаталог). В самом файле документа должны храниться относительные пути к изображениям. При загрузке документа изображения должны загружаться из файлов по путям, относительно файла документа. Предусмотреть обработку ошибок работы с файлами. **20% от максимума**
